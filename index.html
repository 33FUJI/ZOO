<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ§¸ 33æ—¥æœ¬ä»£è³¼ä¸‹å–®ç³»çµ±</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <script>
        // 2. åˆå§‹åŒ–å‡½æ•¸ï¼Œç¢ºä¿é»æ“Šæ™‚å‡½æ•¸å·²å­˜åœ¨
        const firebaseConfig = { 
            apiKey: "AIzaSyD7KmXt_PjFzyYKz4tXGQAmz_wvmmSjAm4", 
            databaseURL: "https://zoo-62638-default-rtdb.firebaseio.com", 
            projectId: "zoo-62638" 
        };
        
        // æª¢æŸ¥æ˜¯å¦å·²åˆå§‹åŒ–ï¼Œé¿å…é‡è¤‡åˆå§‹åŒ–éŒ¯èª¤
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const db = firebase.database();

        // å•†å“è³‡æ–™åº«
        const products = [
            { e: "æ—¥æœ¬è¶…å¸‚", c: "æœé£¾é…ä»¶", n: "T-shirt(M/L)", p: 1200 },
            { e: "æ—¥æœ¬è¶…å¸‚", c: "æœé£¾é…ä»¶", n: "åŠæ‹‰éŠä¸Šè¡£(M/L)", p: 2700 },
            { e: "æ—¥æœ¬è¶…å¸‚", c: "ç”Ÿæ´»ç”¨å“", n: "æ–¹å·¾", p: 700 },
            { e: "æ—¥æœ¬è¶…å¸‚", c: "ç”Ÿæ´»ç”¨å“", n: "æ‘ºç–Šç’°ä¿è¢‹", p: 750 },
            { e: "æ—¥æœ¬è¶…å¸‚", c: "ç”Ÿæ´»ç”¨å“", n: "æ‰‹æè¢‹", p: 1150 },
            { e: "æ—¥æœ¬è¶…å¸‚", c: "å€‹äººå‘¨é‚Š", n: "å‹•ç‰©æ£’æ£’ç³–åŠé£¾", p: 500 },
            { e: "æ—¥æœ¬è¶…å¸‚", c: "å€‹äººå‘¨é‚Š", n: "é¦¬å…‹æ¯", p: 800 },
            { e: "æ—¥æœ¬è¶…å¸‚", c: "å€‹äººå‘¨é‚Š", n: "å£“å…‹åŠ›ç«‹ç‰Œ", p: 700 },
            { e: "æ—¥æœ¬è¶…å¸‚", c: "å€‹äººå‘¨é‚Š", n: "å§“åç‰Œ", p: 450 },
            { e: "æ—¥æœ¬è¶…å¸‚", c: "é£Ÿå“/éš¨æ©Ÿ", n: "èœ‚èœœå¥¶æ²¹è›‹ç³•v2.0", p: 500 },
            { e: "æ—¥æœ¬è¶…å¸‚", c: "é£Ÿå“/éš¨æ©Ÿ", n: "å¾½ç« (éš¨æ©Ÿ)", p: 380 },
            { e: "æ—¥æœ¬è¶…å¸‚", c: "é£Ÿå“/éš¨æ©Ÿ", n: "éš¨æ©Ÿå¡åŒ…", p: 150 },
            { e: "æ—¥æœ¬è¶…å¸‚", c: "é£Ÿå“/éš¨æ©Ÿ", n: "æ‰­è›‹(éš¨æ©Ÿ)", p: 200 },
            { e: "SS10æ—¥æœ¬å‘¨é‚Š", c: "æœé£¾", n: "01 æ¼”å”±æœƒTæ¤", p: 1070 },
            { e: "SS10æ—¥æœ¬å‘¨é‚Š", c: "æœé£¾", n: "02 æ¼”å”±æœƒå¤–å¥—", p: 2300 },
            { e: "SS10æ—¥æœ¬å‘¨é‚Š", c: "æœé£¾", n: "03 æ¼”å”±æœƒç¡è¡£", p: 3050 },
            { e: "SS10æ—¥æœ¬å‘¨é‚Š", c: "é…ä»¶", n: "04 æ¼”å”±æœƒèƒŒåŒ…", p: 1420 },
            { e: "SS10æ—¥æœ¬å‘¨é‚Š", c: "é…ä»¶", n: "05 æ¼”å”±æœƒé›¶éŒ¢åŒ…", p: 680 },
            { e: "SS10æ—¥æœ¬å‘¨é‚Š", c: "é…ä»¶", n: "06 æ¼”å”±æœƒæ¯›æ¯¯", p: 1550 },
            { e: "SS10æ—¥æœ¬å‘¨é‚Š", c: "æ‡‰æ´", n: "07 æ‰‹ç‡ˆè£é£¾", p: 600 },
            { e: "SS10æ—¥æœ¬å‘¨é‚Š", c: "æ‡‰æ´", n: "08 æ‰‹å¹…", p: 800 },
            { e: "SS10æ—¥æœ¬å‘¨é‚Š", c: "æ‡‰æ´", n: "09 æ‡‰æ´æ‰‡", p: 350 },
            { e: "SS10æ—¥æœ¬å‘¨é‚Š", c: "æ‡‰æ´", n: "10 ç™¼å…‰ç«‹ç‰Œ", p: 830 },
            { e: "SS10æ—¥æœ¬å‘¨é‚Š", c: "æ‡‰æ´", n: "11 æ——å¹Ÿ", p: 540 },
            { e: "SS10æ—¥æœ¬å‘¨é‚Š", c: "å‘¨é‚Š", n: "12 æ£’çƒè¡£é‘°åŒ™åœˆ", p: 840 },
            { e: "SS10æ—¥æœ¬å‘¨é‚Š", c: "å‘¨é‚Š", n: "13 ç£å¸ç›’+å°å¡", p: 600 },
            { e: "SS10æ—¥æœ¬å‘¨é‚Š", c: "å‘¨é‚Š", n: "14 ç›¤å­+å°å¡çµ„", p: 970 },
            { e: "SS10æ—¥æœ¬å‘¨é‚Š", c: "å‘¨é‚Š", n: "15 å¨ƒå¨ƒé‘°åŒ™åœˆ", p: 880 },
            { e: "SS10æ—¥æœ¬å‘¨é‚Š", c: "å‘¨é‚Š", n: "16 å¾½ç« ", p: 580 },
            { e: "SS10æ—¥æœ¬å‘¨é‚Š", c: "çè—", n: "17 20é€±å¹´ç´€å¿µæ‰‹å†Š", p: 1240 },
            { e: "SS10æ—¥æœ¬å‘¨é‚Š", c: "é£Ÿå“", n: "18 ç„¡å°¾ç†Šé¤…ä¹¾", p: 330 },
            { e: "SS10è¿½åŠ å‘¨é‚Š", c: "è¿½åŠ ", n: "01 è¡£æœ M/L", p: 1250 },
            { e: "SS10è¿½åŠ å‘¨é‚Š", c: "è¿½åŠ ", n: "02 æ‹–é‹", p: 1360 },
            { e: "SS10è¿½åŠ å‘¨é‚Š", c: "è¿½åŠ ", n: "03 å¤šåŠŸèƒ½æ”¶ç´åŒ…", p: 1200 },
            { e: "SS10è¿½åŠ å‘¨é‚Š", c: "è¿½åŠ ", n: "04 ç¢—(å«å°å¡)", p: 1600 },
            { e: "SS10è¿½åŠ å‘¨é‚Š", c: "è¿½åŠ ", n: "05 æ‰‹æ©Ÿé‘°åŒ™åœˆ", p: 650 },
            { e: "SS10è¿½åŠ å‘¨é‚Š", c: "è¿½åŠ ", n: "06 æ‰‡å¥—", p: 1100 }
        ];

        let cart = [], curItem = null;

        function startApp(eventName) {
            document.getElementById('event-selector').style.display = 'none';
            document.getElementById('head-title').innerText = eventName;
            renderItems(eventName);
        }

        function renderItems(eventName) {
            const list = document.getElementById('item-list');
            const nav = document.getElementById('cat-nav');
            list.innerHTML = ''; nav.innerHTML = '';
            
            const filtered = products.filter(i => i.e === eventName);
            const cats = [...new Set(filtered.map(i => i.c))];
            
            cats.forEach(c => {
                nav.innerHTML += `<button class="nav-btn" onclick="document.getElementById('cat-${c}').scrollIntoView()">${c}</button>`;
                let html = `<div id="cat-${c}" style="font-weight:bold; margin:15px 0 5px; border-left:4px solid #b0a496; padding-left:10px;">${c}</div><div class="product-grid">`;
                filtered.filter(i => i.c === c).forEach(i => {
                    html += `<div class="p-btn" onclick="sel('${i.n}', ${i.p})"><div class="p-name">${i.n}</div><div class="p-price">$${i.p}</div></div>`;
                });
                list.innerHTML += html + '</div>';
            });
        }

        function sel(n, p) {
            curItem = { n, p };
            document.getElementById('sel-n').innerText = n;
            document.getElementById('add-btn').disabled = false;
            document.getElementById('add-btn').style.background = '#b0a496';
        }

        function adj(v) {
            let q = document.getElementById('qty');
            let n = parseInt(q.value) + v;
            if (n > 0) q.value = n;
        }

        function addToCart() {
            if(!curItem) return;
            const q = parseInt(document.getElementById('qty').value);
            cart.push({ ...curItem, q: q });
            showCart();
            document.getElementById('sel-n').innerText = "âœ… å·²åŠ å…¥æ¸…å–®";
            document.getElementById('add-btn').disabled = true;
            document.getElementById('add-btn').style.background = '#ccc';
        }

        function showCart() {
            const div = document.getElementById('cart-area');
            div.innerHTML = cart.map((i, idx) => `
                <div style="display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #eee; font-size:0.9em;">
                    <span>${i.n} x ${i.q}</span>
                    <span>$${i.p * i.q} <button onclick="cart.splice(${idx},1);showCart()" style="border:none; background:none; color:red; cursor:pointer;">âœ•</button></span>
                </div>`).join('');
            document.getElementById('total-price').innerText = cart.reduce((s, i) => s + (i.p * i.q), 0);
        }

        function sendOrder() {
            const nick = document.getElementById('nick-input').value;
            if (!nick) return alert('è«‹å¡«å¯«æš±ç¨±ï¼');
            if (cart.length === 0) return alert('æ¸…å–®æ˜¯ç©ºçš„ï¼');
            
            db.ref('orders_final').push({
                nick: nick,
                event: document.getElementById('head-title').innerText,
                items: cart,
                total: document.getElementById('total-price').innerText,
                time: new Date().toLocaleString()
            }).then(() => {
                alert('ä¸‹å–®æˆåŠŸï¼è«‹é€šçŸ¥ 33');
                cart = []; showCart();
            });
        }
    </script>

    <style>
        :root { --main-brown: #b0a496; --bg-cream: #fcf8f5; --price-red: #d9534f; --profit-green: #6b8e23; --dark-blue: #161b26; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg-cream); margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; color: #5d5246; }
        header { background: var(--main-brown); color: white; padding: 12px; text-align: center; font-size: 1.2em; font-weight: bold; flex-shrink: 0; }
        
        #event-selector { position: fixed; inset: 0; background: var(--bg-cream); z-index: 2000; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .event-card { background: var(--dark-blue); color: white; border-radius: 15px; padding: 25px; width: 220px; margin: 10px; cursor: pointer; box-shadow: 0 8px 15px rgba(0,0,0,0.2); }
        
        .nav-bar { background: #e8e0d9; padding: 8px; display: flex; gap: 8px
