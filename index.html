<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>33æ—¥æœ¬å‹•ç‰©åœ’</title>
<script src=""></script>
<script src=""></script>
<style>
:root { --bg: #fdfaf5; --blue: #003399; }
body { font-family: sans-serif; background: var(--bg); margin: 0; padding-bottom: 350px; }
header { padding: 20px; text-align: center; font-size: 1.3em; font-weight: bold; color: #b5a491; }
.input-box { padding: 0 20px 20px; }
.nick-input { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ddd; box-sizing: border-box; }
.cat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 0 20px; }
.cat-card { background: #fff; padding: 30px 10px; border-radius: 15px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.05); cursor: pointer; border: 1px solid #eee; }
.modal { position: fixed; inset: 0; background: var(--bg); z-index: 9999; display: none; flex-direction: column; }
.modal-header { padding: 15px; background: #fff; display: flex; align-items: center; border-bottom: 1px solid #eee; }
.p-group { background: #fff; margin: 10px; border-radius: 10px; border: 1px solid #f0f0f0; overflow: hidden; }
.p-header { padding: 10px 15px; display: flex; justify-content: space-between; font-weight: bold; background: #fafafa; }
.spec-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 15px; border-bottom: 1px solid #f9f9f9; }
.qty-controls { display: flex; align-items: center; gap: 10px; }
.qty-btn { width: 30px; height: 30px; border-radius: 5px; border: none; background: #eee; cursor: pointer; font-weight: bold; }
.order-area { position: fixed; bottom: 0; left: 0; right: 0; background: #fff; padding: 20px; box-shadow: 0 -5px 15px rgba(0,0,0,0.1); z-index: 10000; }
.total-price { font-size: 2.5em; font-weight: bold; color: #d9534f; text-align: right; }
.submit-btn { width: 100%; padding: 15px; border-radius: 10px; border: none; background: var(--blue); color: #fff; font-weight: bold; cursor: pointer; margin-top: 10px; }
.footer { text-align: center; padding: 20px; color: #ccc; font-size: 0.8em; }
</style>
</head>
<body>
<header>âœ¨ 33æ—¥æœ¬å‹•ç‰©åœ’ âœ¨</header>
<div class="input-box"><input type="text" id="user-nick" class="nick-input" placeholder="âœ è¼¸å…¥æš±ç¨± (å¿…å¡«)"></div>
<div class="cat-grid">
<div class="cat-card" onclick="openCat()"><h3>ğŸ›’ æ—¥æœ¬è¶…å¸‚ä»£è³¼</h3></div>
<div class="cat-card" onclick="location.reload()"><h3>ğŸ”„ åˆ·æ–°é é¢</h3></div>
</div>
<div id="item-modal" class="modal">
<div class="modal-header"><span onclick="closeModal()" style="cursor:pointer; padding:10px;">â® è¿”å›</span><h2 style="margin-left:10px; font-size:1.1em;">å•†å“æ¸…å–®</h2></div>
<div id="p-list" style="overflow-y:auto; flex:1;"></div>
</div>
<div class="order-area" id="order-bar" style="display:none;">
<div style="font-weight:bold; margin-bottom:5px;">ğŸ“‹ å·²é¸æ˜ç´°ï¼š</div>
<div id="cart-list" style="max-height:80px; overflow-y:auto; font-size:0.9em; color:#666; margin-bottom:10px;"></div>
<div class="total-price">$<span id="total-val">0</span></div>
<button class="submit-btn" onclick="submitOrder()">âœ… ç¢ºèªç™»è¨˜</button>
<div onclick="clearCart()" style="text-align:center; color:#999; margin-top:10px; cursor:pointer; font-size:0.8em;">æ¸…ç©ºé‡é¸</div>
</div>
<div class="footer"><span onclick="window.open('')">ç®¡ç†å¾Œå°</span></div>
<script>
const members = ["ç‰¹", "æ¾ˆ", "é›²", "ç«¥", "èµ«", "æµ·", "æº", "æ—­", "åœ­"];
const shopItems = [
{n: "T-shirt ($1200)", p: 1200, s: ["M", "L"]},
{n: "æ‹‰éŠé€£å¸½è¡« ($2700)", p: 2700, s: ["M", "L"]},
{n: "åŠé£¾ ($500)", p: 500, s: members},
{n: "é¦¬å…‹æ¯ ($800)", p: 800, s: members},
{n: "å§“åç‰Œ ($450)", p: 450, s: members},
{n: "ç’°ä¿è¢‹ ($750)", p: 750, s: ["å–®ä¸€è¦æ ¼"]},
{n: "æ‰­è›‹ ($200)", p: 200, s: ["å–®ä¸€è¦æ ¼"]}
];
let cart = {};
function openCat() {
const list = document.getElementById('p-list');
list.innerHTML = '';
shopItems.forEach((p, i) => {
let sr = p.s.map(s => {
let k = ${i}_${s};
return &lt;div class=&quot;spec-item&quot;&gt;&lt;span&gt;${s}&lt;/span&gt;&lt;div class=&quot;qty-controls&quot;&gt; &lt;button class=&quot;qty-btn&quot; onclick=&quot;updateQty(&#39;${k}&#39;,-1)&quot;&gt;-&lt;/button&gt; &lt;span id=&quot;num-${k}&quot;&gt;${cart[k] || 0}&lt;/span&gt; &lt;button class=&quot;qty-btn&quot; onclick=&quot;updateQty(&#39;${k}&#39;,1)&quot;&gt;+&lt;/button&gt; &lt;/div&gt;&lt;/div&gt;;
}).join('');
list.innerHTML += &lt;div class=&quot;p-group&quot;&gt;&lt;div class=&quot;p-header&quot;&gt;&lt;span&gt;${p.n}&lt;/span&gt;&lt;/div&gt;${sr}&lt;/div&gt;;
});
document.getElementById('item-modal').style.display = 'flex';
}
function updateQty(k, d) {
cart[k] = (cart[k] || 0) + d;
if (cart[k] <= 0) delete cart[k];
const el = document.getElementById(num-${k});
if (el) el.innerText = cart[k] || 0;
updateOrderBar();
}
function updateOrderBar() {
const bar = document.getElementById('order-bar');
const list = document.getElementById('cart-list');
const keys = Object.keys(cart);
if (!keys.length) { bar.style.display = 'none'; return; }
bar.style.display = 'block';
list.innerHTML = ''; let t = 0;
keys.forEach(k => {
const [i, s] = k.split('_');
const p = shopItems[i];
t += p.p * cart[k];
list.innerHTML += &lt;div&gt;Â· ${p.n.split(&#39; &#39;)[0]} (${s}) x ${cart[k]}&lt;/div&gt;;
});
document.getElementById('total-val').innerText = t;
}
function closeModal() { document.getElementById('item-modal').style.display = 'none'; }
function clearCart() { cart = {}; updateOrderBar(); closeModal(); }
function submitOrder() {
const nick = document.getElementById('user-nick').value;
if (!nick) return alert("è«‹è¼¸å…¥æš±ç¨±ï¼");
const cfg = { apiKey: "AIzaSyD7KmXt_PjFzyYKz4tXGQAmz_wvmmSjAm4", databaseURL: "", projectId: "zoo-62638" };
if (!firebase.apps.length) firebase.initializeApp(cfg);
firebase.database().ref('orders').push({ nick, time: new Date().toLocaleString(), items: cart, total: document.getElementById('total-val').innerText })
.then(() => { alert("ç™»è¨˜æˆåŠŸï¼"); clearCart(); });
}
</script>
</body>
</html>
